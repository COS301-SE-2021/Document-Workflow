<ion-header>
  <ion-title>
    Add a new Workflow
  </ion-title>
</ion-header>

<ion-content>
  <form [formGroup]="workflowForm" (ngSubmit)="submit()">
    <!-- <ion-slides pager="slideToggler">
      <ion-slide> -->

        <ion-item>
          <ion-label>Document name</ion-label>
          <ion-input formControlName="workflowName" inputmode="text"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>Document Description</ion-label>
          <ion-textarea formControlName="workflowDescription" inputmode="text"></ion-textarea>
        </ion-item>



      <!-- </ion-slide>
      <ion-slide> -->
        <ion-card>
          <ion-card-header>
            <ion-item>
              <ion-label>Reorder phases</ion-label>

              <!-- <ion-toggle (click)="reOrderPhases()"></ion-toggle> -->
            </ion-item>
          </ion-card-header>
          <ion-card-content>
            <!-- <ion-reorder-group [disabled]="true" (ionItemReorder)="doReorder($event)"> -->
            <ion-item *ngFor="let phase of workflowForm.controls.phases['controls']; let i = index">
              <ion-card style="height:100%; width:100%">

                <ion-card-header>
                  <ion-card-title>Phase {{i+1}}</ion-card-title>
                  <ion-fab vertical="top" horizontal="end">
                    <ion-fab-button mini (click)="addUser(workflowForm.controls.phases['controls'][i])">
                      <ion-icon name="add-circle-outline"></ion-icon>
                    </ion-fab-button>
                  </ion-fab>
                </ion-card-header>
                <ion-card-content style="height:100%; width:100%">
                  <ion-card style="height:100%; width:100%">
                    <ion-card-header>
                      <ion-card-title>Add user </ion-card-title>
                    </ion-card-header>
                    <ion-card-content
                      *ngFor="let control of workflowForm.controls.phases['controls'][i].controls | keyvalue"
                      style="height:100%; width:100%">
                      <ion-item>
                        <ion-input type="text" [formControlName]="control.key"></ion-input>
                        <ion-icon name="close-circle-outline"
                          (click)="removeUser(workflowForm.controls.phases['controls'][i], control)"></ion-icon>
                      </ion-item>
                      <ion-fab>
                        <ion-fab-button (click)="tester(phase.controls)">
                          tester
                        </ion-fab-button>
                      </ion-fab>
                    </ion-card-content>
                  </ion-card>
                </ion-card-content>
              </ion-card>
            </ion-item>
            <!-- </ion-reorder-group> -->
          </ion-card-content>

          <ion-button expand="block" color="primary" fill="outline" (click)="addPhase()">Add Phase </ion-button>

        </ion-card>
      <!-- </ion-slide>
    </ion-slides> -->
    <ion-button expand="block" color="primary" fill="outline" [disabled]="!workflowForm.valid" type="submit">Add
      workflow</ion-button>
  </form>


  <ion-item>
    <ion-label position="stacked">Add your document</ion-label>
    <ion-button hidden="true">
      <!-- dont edit, its not an error believe it or not -->
      <input FormControlName="fileUploader" type="file" #fileInput (change)="uploadFile($event)" hidden="false"
        accept="application/pdf" required>
    </ion-button>
    <ion-button (click)="selectImageSource()">Add</ion-button>
  </ion-item>

</ion-content>



<!-- *ngFor="let phase of workflowForm.controls.phases['controls']; let i = index" -->
<!--
 <ion-item *ngFor="let phase of workflowForm.controls.phases['controls']; let i = index">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Phase {{i+1}}</ion-card-title>
          <ion-fab vertical="top" horizontal="end" >
            <ion-fab-button mini (click)="addUser(workflowForm.controls.phases['controls'][i])">
              <ion-icon  name="add-circle-outline"></ion-icon>
            </ion-fab-button>
          </ion-fab>
        </ion-card-header>
        <ion-card-content>
          <form [formGroup]="workflowForm.controls.phases['controls'][i]">
            <ion-item *ngFor="let control of workflowForm.controls.phases['controls'][i].controls | keyvalue; let j = index">
                <ion-card-header>
                  <ion-card-title>Add users</ion-card-title>
                </ion-card-header>
                  <ion-input type="text" [formControlName]="control.key"></ion-input>
                  <ion-icon name="close-circle-outline"
                    (click)="removeUser(workflowForm.controls.phases['controls'][i], control)"></ion-icon>
            </ion-item>
          </form>
          <ion-button expand="block" color="primary" fill="outline"
      (click)="removePhase(i)">Remove this Phase </ion-button>
        </ion-card-content>
      </ion-card>
    </ion-item>
-->
